{% for vc in vcenter_status %}
<div class="vcenter-pill {{ 'connected' if vc.connected else 'disconnected' }} refresh-{{ vc.refresh_status | lower }}"
    data-vcenter-id="{{ vc.id }}" {% if vc.connected %} {% if vc.refresh_status !='REFRESHING' %}
    hx-post="/api/vcenters/refresh/{{ vc.id }}" hx-trigger="click" hx-swap="none" title="Click to refresh this vCenter"
    style="cursor: pointer;" {% endif %} {% else %} onclick="openLoginModal('{{ vc.id }}')"
    title="Disconnected - click to try reconnecting" style="cursor: pointer;" {% endif %}>

    {% if vc.connected %}
    <span class="status-indicator"></span>
    {% else %}
    {% if vc.error_type == 'auth' %}
    <i data-lucide="shield-alert" style="color: var(--danger); width: 14px; height: 14px;"
        title="Authentication error - click to try logging in again"></i>
    {% elif vc.error_type in ['network', 'timeout', 'ssl'] %}
    <i data-lucide="wifi-off" style="color: var(--danger); width: 14px; height: 14px;"
        title="Network connection error - check connectivity"></i>
    {% else %}
    <i data-lucide="alert-triangle" style="color: var(--danger); width: 14px; height: 14px;"
        title="Connection error: {{ vc.error_type }}"></i>
    {% endif %}
    {% endif %}

    <span class="vcenter-name">{{ vc.name }}</span>

    <div class="refresh-info">
        {% if vc.refresh_status == 'REFRESHING' %}
        <i data-lucide="loader-2" class="spin-icon"></i>
        {% elif vc.refresh_status == 'ERROR' %}
        <i data-lucide="alert-circle" style="color: var(--danger); width: 14px; height: 14px;"></i>
        {% else %}
        <span class="refresh-timer">{{ vc.seconds_until }}s</span>
        {% endif %}
    </div>
</div>
{% endfor %}